(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5720)}])},7058:function(e,s,r){"use strict";r.d(s,{z:function(){return o}});var t=r(5893),n=r(4184),a=r.n(n),l=r(5141),i=r.n(l);let o=e=>{let{children:s,className:r,...n}=e;return(0,t.jsx)("button",{className:a()(i().button,r),...n,children:s})}},1170:function(e,s,r){"use strict";r.d(s,{o:function(){return l}});var t=r(5893),n=r(5072),a=r.n(n);let l=e=>{let{error:s}=e,r=null;return r=(null==s?void 0:s.isRequestError)?null==s?void 0:s.responseBody:null==s?void 0:s.message,(0,t.jsx)("div",{className:a().wrap,children:JSON.stringify(r)})}},3306:function(e,s,r){"use strict";r.d(s,{I:function(){return o}});var t=r(5893),n=r(4184),a=r.n(n),l=r(7477),i=r.n(l);let o=e=>{let{className:s,...r}=e;return(0,t.jsx)("input",{className:a()(i().input,s),...r})}},5720:function(e,s,r){"use strict";r.r(s),r.d(s,{__N_SSP:function(){return R},default:function(){return V}});var t=r(5893),n=r(9008),a=r.n(n),l=r(7294),i=r(2699),o=r.n(i),c=r(4184),d=r.n(c),u=r(3839),x=r.n(u),h=r(6842),_=r.n(h);let m=e=>{let{messageList:s}=e;return(0,t.jsx)("ul",{className:x().ul,children:s.map((e,s)=>(0,t.jsxs)("li",{className:x().li,children:[(0,t.jsxs)("span",{children:["#",s+1]}),(0,t.jsxs)("span",{className:d()(x().author),children:[(0,t.jsx)("span",{className:_().className,children:"автор: "}),e.author]}),(0,t.jsxs)("span",{className:x().text,children:[(0,t.jsx)("span",{className:_().className,children:"сообщение: "}),e.text]})]},e.id))})};var p=r(2315),N=r.n(p),f=r(2175),j=r(4231),w=r(6968),g=r.n(w),v=r(3306),b=r(9129),k=r.n(b);let E=e=>{let{...s}=e;return(0,t.jsx)("textarea",{className:k().wrap,...s})};var F=r(7058),M=r(2686),T=r(5952),B=r(1170);let C={author:"",text:""},A=j.Ry({author:j.Z_().required("Не введено имя автора!"),text:j.Z_().required("Не введено сообщение!")}),S=()=>{let e=(0,M.T)(),[s,r]=(0,l.useState)(!0),n=(0,M.C)(T.Z.selectors.getAddNewMessageRequest),a=(0,f.TA)({initialValues:C,onSubmit:s=>{e(T.Z.thunks.addNewMessageThunk({data:s,successCb:()=>{a.resetForm()}}))},...s?{validationSchema:A}:{}});return(0,t.jsxs)("div",{className:g().wrap,children:[(0,t.jsx)(t.Fragment,{children:n.error&&(0,t.jsx)(B.o,{error:n.error})}),(0,t.jsxs)("form",{onSubmit:a.handleSubmit,noValidate:!0,autoComplete:"off",className:g().wrap,children:[(0,t.jsxs)("div",{className:g().fieldRow,children:[(0,t.jsx)(v.I,{type:"checkbox",className:g().clientValidationCheckBox,checked:s,onChange:e=>r(e.target.checked)}),"Установите для предварительной клиентской валидации"]}),(0,t.jsxs)("div",{className:g().field,children:[(0,t.jsx)("label",{children:"Автор"}),(0,t.jsx)(v.I,{type:"text",placeholder:"Введите имя",...a.getFieldProps("author")}),Boolean(a.touched.author)&&Boolean(a.errors.author)&&(0,t.jsx)("div",{className:g().msgError,children:a.errors.author})]}),(0,t.jsxs)("div",{className:g().field,children:[(0,t.jsx)("label",{children:"Текст сообщения"}),(0,t.jsx)(E,{placeholder:"Введите текст сообщения",...a.getFieldProps("text")}),Boolean(a.touched.text)&&Boolean(a.errors.text)&&(0,t.jsx)("div",{className:g().msgError,children:a.errors.text})]}),(0,t.jsx)("div",{className:g().controlPanelWrap,children:(0,t.jsx)(F.z,{type:"submit",children:"Отправить"})})]})]})},P=e=>{let{messageFromServer:s}=e,r=(0,M.C)(T.Z.selectors.getMessagesAddedInTheCurrentSession),n=(0,M.T)();(0,l.useEffect)(()=>()=>{n(T.Z.actions.clear())},[n]);let a=[...s,...r];return(0,t.jsxs)("div",{className:o().wrap,children:[(0,t.jsx)("h2",{className:N().className,children:"Список сообщений"}),(0,t.jsx)(m,{messageList:a}),(0,t.jsx)("h2",{className:N().className,children:"Добавить новое сообщение"}),(0,t.jsx)(S,{})]})};var R=!0;function V(e){let{messageFromServer:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a(),{children:[(0,t.jsx)("title",{children:"Create Next App"}),(0,t.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),s&&(0,t.jsx)(P,{messageFromServer:s}),null===s&&(0,t.jsx)(B.o,{error:{message:"ошибка обращения к АПИ для получения предварительных данных"}})]})}},6968:function(e){e.exports={wrap:"AddNewMessageForm_wrap__Rd_3t",field:"AddNewMessageForm_field__7pfGk",fieldRow:"AddNewMessageForm_fieldRow__d4PTG",controlPanelWrap:"AddNewMessageForm_controlPanelWrap__fi5SB",msgError:"AddNewMessageForm_msgError__lElSR",clientValidationCheckBox:"AddNewMessageForm_clientValidationCheckBox__WLTm2"}},5141:function(e){e.exports={button:"Button_button__30ukX"}},5072:function(e){e.exports={wrap:"ErrorView_wrap__gVGTr"}},7477:function(e){e.exports={input:"Input_input__lvORT"}},3839:function(e){e.exports={ul:"MessageList_ul__56TVM",li:"MessageList_li__uZ2Ye"}},2699:function(e){e.exports={wrap:"PageViewMessageBoard_wrap__FglQR"}},9129:function(e){e.exports={wrap:"TextArea_wrap__Y_QqB"}}},function(e){e.O(0,[100,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);